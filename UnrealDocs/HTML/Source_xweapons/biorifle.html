<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<title>UT2004 UnrealScript - Source: XWeapons.BioRifle</title>
	<meta name="Generator" content="UnCodeX 241" />
	<link rel="stylesheet" href="../DocStyle2.css" type="text/css" title="Original Purple" />
	<link rel="alternative stylesheet" href="../DocStyle2-blue.css" type="text/css" title="Blue" />
	<link rel="alternative stylesheet" href="../DocStyle2-red.css" type="text/css" title="Red" />
	<!--[if IE]>
	<link rel="stylesheet" href="../DocStyle2-msie.css" type="text/css" />
	<![endif]-->
	<script src="../styleswitcher.js" type="text/javascript"></script>
</head>
<body>

<div class="header">
<table class="header">
<tr class="header">
	<td class="header"><a href="../overview.html">Overview</a></td>
	<td class="header"><a href="../xweapons/xweapons-overview.html">Package</a></td>
	<td class="header"><a href="../xweapons/biorifle.html">Class</a></td>
	<td class="header_hilight">Source</td>
	<td class="header"><a class="header" href="../classtree.html#BioRifle">Class tree</a></td>
	<td class="header"><a class="header" href="../glossary_A.html">Glossary</a></td>
	<td class="logo" rowspan="2">UnrealScript<br />Documentation</td>
</tr>
<tr>
	<td class="subheader" colspan="3"><a href="../Source_xweapons/bioglob.html">previous class</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="../Source_xweapons/bioriflepickup.html">next class</a></td>
	<td class="subheader" colspan="2"><a href="../index.html#Source_xweapons/biorifle.html" target="_top">frames</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="" target="_top">no frames</a></td>
</tr>
</table>
</div>
<div class="spacer"></div>

<h1><a href="../xweapons/xweapons-overview.html">XWeapons</a>.<a href="../xweapons/biorifle.html">BioRifle</a></h1>
<br />
<div class="source"><table class="source"><tr><td class="source_lineno"><span class="source_lineno">00001<br />00002<br />00003<br />00004<br />00005<br />00006<br />00007<br />00008<br />00009<br />00010<br />00011<br />00012<br />00013<br />00014<br />00015<br />00016<br />00017<br />00018<br />00019<br />00020<br />
00021<br />00022<br />00023<br />00024<br />00025<br />00026<br />00027<br />00028<br />00029<br />00030<br />00031<br />00032<br />00033<br />00034<br />00035<br />00036<br />00037<br />00038<br />00039<br />00040<br />
00041<br />00042<br />00043<br />00044<br />00045<br />00046<br />00047<br />00048<br />00049<br />00050<br />00051<br />00052<br />00053<br />00054<br />00055<br />00056<br />00057<br />00058<br />00059<br />00060<br />
00061<br />00062<br />00063<br />00064<br />00065<br />00066<br />00067<br />00068<br />00069<br />00070<br />00071<br />00072<br />00073<br />00074<br />00075<br />00076<br />00077<br />00078<br />00079<br />00080<br />
00081<br />00082<br />00083<br />00084<br />00085<br />00086<br />00087<br />00088<br />00089<br />00090<br />00091<br />00092<br />00093<br />00094<br />00095<br />00096<br />00097<br />00098<br />00099<br />00100<br />
00101<br />00102<br />00103<br />00104<br />00105<br />00106<br />00107<br />00108<br />00109<br />00110<br />00111<br />00112<br />00113<br />00114<br />00115<br />00116<br />00117<br />00118<br />00119<br />00120<br />
00121<br />00122<br />00123<br />00124<br />00125<br />00126<br />00127<br />00128<br />00129<br />00130<br />00131<br />00132<br />00133<br />00134<br />00135<br />00136</span></td>
<td class="source"><pre class="source"><a name="0"></a><span class="source_keyword">class</span> <span class="source_type"><a href="../xweapons/biorifle.html" class="source">BioRifle</a></span> <span class="source_keyword">extends</span> <span class="source_type"><a href="../engine/weapon.html" class="source">Weapon</a></span>
<a name="2"></a>    <span class="source_keyword2">config</span>(<span class="source_type">user</span>);
<a name="3"></a>
<a name="4"></a><span class="source_macro">#EXEC OBJ LOAD FILE=InterfaceContent.utx
</span><a name="5"></a>
<a name="6"></a><span class="source_keyword">function</span> DropFrom(<span class="source_type"><a href="../core/object.html#Vector" class="source">vector</a></span> StartLocation)
<a name="7"></a>{
<a name="8"></a>	<span class="source_keyword">if</span> ( bCanThrow && (AmmoAmount(<span class="source_int">0</span>) == <span class="source_int">0</span>) )
<a name="9"></a>		AddAmmo(<span class="source_int">1</span>,<span class="source_int">0</span>);
<a name="10"></a>    <span class="source_keyword">Super</span>.DropFrom(StartLocation);
<a name="11"></a>}
<a name="12"></a>
<a name="13"></a><span class="source_comment">// AI Interface
</span><a name="14"></a><span class="source_keyword">function</span> <span class="source_keyword">float</span> GetAIRating()
<a name="15"></a>{
<a name="16"></a>	<span class="source_keyword">local</span> <span class="source_type"><a href="../unrealgame/bot.html" class="source">Bot</a></span> <span class="source_type">B</span>;
<a name="17"></a>	<span class="source_keyword">local</span> <span class="source_keyword">float</span> EnemyDist;
<a name="18"></a>	<span class="source_keyword">local</span> <span class="source_type"><a href="../core/object.html#Vector" class="source">vector</a></span> EnemyDir;
<a name="19"></a>
<a name="20"></a>	<span class="source_type">B</span> = <span class="source_type"><a href="../unrealgame/bot.html" class="source">Bot</a></span>(<span class="source_type">Instigator</span>.<span class="source_type"><a href="../engine/controller.html" class="source">Controller</a></span>);
<a name="21"></a>	<span class="source_keyword">if</span> ( <span class="source_type">B</span> == <span class="source_keyword">None</span> )
<a name="22"></a>		<span class="source_keyword">return</span> AIRating;
<a name="23"></a>
<a name="24"></a>	<span class="source_keyword">if</span> ( <span class="source_type">B</span>.Enemy == <span class="source_keyword">None</span> )
<a name="25"></a>	{
<a name="26"></a>		<span class="source_keyword">if</span> ( (<span class="source_type">B</span>.<span class="source_type">Target</span> != <span class="source_keyword">None</span>) && VSize(<span class="source_type">B</span>.<span class="source_type">Target</span>.Location - <span class="source_type">B</span>.<span class="source_type"><a href="../engine/pawn.html" class="source">Pawn</a></span>.Location) &gt; <span class="source_int">3500</span> )
<a name="27"></a>			<span class="source_keyword">return</span> <span class="source_int">0.2</span>;
<a name="28"></a>		<span class="source_keyword">return</span> AIRating;
<a name="29"></a>	}
<a name="30"></a>
<a name="31"></a>	<span class="source_comment">// if retreating, favor this weapon
</span><a name="32"></a>	EnemyDir = <span class="source_type">B</span>.Enemy.Location - <span class="source_type">Instigator</span>.Location;
<a name="33"></a>	EnemyDist = VSize(EnemyDir);
<a name="34"></a>	<span class="source_keyword">if</span> ( EnemyDist &gt; <span class="source_int">1500</span> )
<a name="35"></a>		<span class="source_keyword">return</span> <span class="source_int">0.1</span>;
<a name="36"></a>	<span class="source_keyword">if</span> ( <span class="source_type">B</span>.IsRetreating() )
<a name="37"></a>		<span class="source_keyword">return</span> (AIRating + <span class="source_int">0.4</span>);
<a name="38"></a>	<span class="source_keyword">if</span> ( (<span class="source_type">B</span>.Enemy.<span class="source_type"><a href="../engine/weapon.html" class="source">Weapon</a></span> != <span class="source_keyword">None</span>) && <span class="source_type">B</span>.Enemy.<span class="source_type"><a href="../engine/weapon.html" class="source">Weapon</a></span>.bMeleeWeapon )
<a name="39"></a>		<span class="source_keyword">return</span> (AIRating + <span class="source_int">0.35</span>);
<a name="40"></a>	<span class="source_keyword">if</span> ( -<span class="source_int">1</span> * EnemyDir.<span class="source_type">Z</span> &gt; EnemyDist )
<a name="41"></a>		<span class="source_keyword">return</span> AIRating + <span class="source_int">0.1</span>;
<a name="42"></a>	<span class="source_keyword">if</span> ( EnemyDist &gt; <span class="source_int">1000</span> )
<a name="43"></a>		<span class="source_keyword">return</span> <span class="source_int">0.35</span>;
<a name="44"></a>	<span class="source_keyword">return</span> AIRating;
<a name="45"></a>}
<a name="46"></a>
<a name="47"></a><span class="source_comment">/* BestMode()
<a name="48"></a>choose between regular or alt-fire
<a name="49"></a>*/</span>
<a name="50"></a><span class="source_keyword">function</span> <span class="source_keyword">byte</span> BestMode()
<a name="51"></a>{
<a name="52"></a>	<span class="source_keyword">if</span> ( FRand() &lt; <span class="source_int">0.8</span> )
<a name="53"></a>		<span class="source_keyword">return</span> <span class="source_int">0</span>;
<a name="54"></a>	<span class="source_keyword">return</span> <span class="source_int">1</span>;
<a name="55"></a>}
<a name="56"></a>
<a name="57"></a><span class="source_keyword">function</span> <span class="source_keyword">float</span> SuggestAttackStyle()
<a name="58"></a>{
<a name="59"></a>	<span class="source_keyword">local</span> <span class="source_type"><a href="../unrealgame/bot.html" class="source">Bot</a></span> <span class="source_type">B</span>;
<a name="60"></a>	<span class="source_keyword">local</span> <span class="source_keyword">float</span> EnemyDist;
<a name="61"></a>
<a name="62"></a>	<span class="source_type">B</span> = <span class="source_type"><a href="../unrealgame/bot.html" class="source">Bot</a></span>(<span class="source_type">Instigator</span>.<span class="source_type"><a href="../engine/controller.html" class="source">Controller</a></span>);
<a name="63"></a>	<span class="source_keyword">if</span> ( (<span class="source_type">B</span> == <span class="source_keyword">None</span>) || (<span class="source_type">B</span>.Enemy == <span class="source_keyword">None</span>) )
<a name="64"></a>		<span class="source_keyword">return</span> <span class="source_int">0.4</span>;
<a name="65"></a>
<a name="66"></a>	EnemyDist = VSize(<span class="source_type">B</span>.Enemy.Location - <span class="source_type">Instigator</span>.Location);
<a name="67"></a>	<span class="source_keyword">if</span> ( EnemyDist &gt; <span class="source_int">1500</span> )
<a name="68"></a>		<span class="source_keyword">return</span> <span class="source_int">1.0</span>;
<a name="69"></a>	<span class="source_keyword">if</span> ( EnemyDist &gt; <span class="source_int">1000</span> )
<a name="70"></a>		<span class="source_keyword">return</span> <span class="source_int">0.4</span>;
<a name="71"></a>	<span class="source_keyword">return</span> -<span class="source_int">0.4</span>;
<a name="72"></a>}
<a name="73"></a>
<a name="74"></a><span class="source_keyword">function</span> <span class="source_keyword">float</span> SuggestDefenseStyle()
<a name="75"></a>{
<a name="76"></a>	<span class="source_keyword">local</span> <span class="source_type"><a href="../unrealgame/bot.html" class="source">Bot</a></span> <span class="source_type">B</span>;
<a name="77"></a>
<a name="78"></a>	<span class="source_type">B</span> = <span class="source_type"><a href="../unrealgame/bot.html" class="source">Bot</a></span>(<span class="source_type">Instigator</span>.<span class="source_type"><a href="../engine/controller.html" class="source">Controller</a></span>);
<a name="79"></a>	<span class="source_keyword">if</span> ( (<span class="source_type">B</span> == <span class="source_keyword">None</span>) || (<span class="source_type">B</span>.Enemy == <span class="source_keyword">None</span>) )
<a name="80"></a>		<span class="source_keyword">return</span> <span class="source_int">0</span>;
<a name="81"></a>
<a name="82"></a>	<span class="source_keyword">if</span> ( VSize(<span class="source_type">B</span>.Enemy.Location - <span class="source_type">Instigator</span>.Location) &lt; <span class="source_int">1600</span> )
<a name="83"></a>		<span class="source_keyword">return</span> -<span class="source_int">0.6</span>;
<a name="84"></a>	<span class="source_keyword">return</span> <span class="source_int">0</span>;
<a name="85"></a>}
<a name="86"></a>
<a name="87"></a><span class="source_comment">// End AI Interface
</span><a name="88"></a>
<a name="89"></a><span class="source_keyword2">simulated</span> <span class="source_keyword">function</span> AnimEnd(<span class="source_keyword">int</span> <span class="source_type">Channel</span>)
<a name="90"></a>{
<a name="91"></a>    <span class="source_keyword">local</span> <span class="source_keyword">name</span> anim;
<a name="92"></a>    <span class="source_keyword">local</span> <span class="source_keyword">float</span> frame, rate;
<a name="93"></a>    GetAnimParams(<span class="source_int">0</span>, anim, frame, rate);
<a name="94"></a>
<a name="95"></a>    <span class="source_keyword">if</span> (anim == <span class="source_name">'AltFire'</span>)
<a name="96"></a>        LoopAnim(<span class="source_name">'Hold'</span>, <span class="source_int">1.0</span>, <span class="source_int">0.1</span>);
<a name="97"></a>    <span class="source_keyword">else</span>
<a name="98"></a>        <span class="source_keyword">Super</span>.AnimEnd(<span class="source_type">Channel</span>);
<a name="99"></a>}
<a name="100"></a>
<a name="101"></a><span class="source_keyword2">simulated</span> <span class="source_keyword">function</span> <span class="source_keyword">bool</span> HasAmmo()
<a name="102"></a>{
<a name="103"></a>    <span class="source_keyword">return</span> ( (AmmoAmount(<span class="source_int">0</span>) &gt;= <span class="source_int">1</span>) || FireMode[<span class="source_int">1</span>].bIsFiring );
<a name="104"></a>}
<a name="105"></a>
<a name="106"></a><span class="source_keyword">defaultproperties</span>
<a name="107"></a>{
<a name="108"></a>     FireModeClass(<span class="source_int">0</span>)=<span class="source_keyword">Class</span><span class="source_name">'XWeapons.BioFire'</span>
<a name="109"></a>     FireModeClass(<span class="source_int">1</span>)=<span class="source_keyword">Class</span><span class="source_name">'XWeapons.BioChargedFire'</span>
<a name="110"></a>     PutDownAnim=<span class="source_string">"PutDown"</span>
<a name="111"></a>     SelectSound=<span class="source_type"><a href="../engine/sound.html" class="source">Sound</a></span><span class="source_name">'WeaponSounds.FlakCannon.SwitchToFlakCannon'</span>
<a name="112"></a>     SelectForce=<span class="source_string">"SwitchToFlakCannon"</span>
<a name="113"></a>     AIRating=<span class="source_int">0.550000</span>
<a name="114"></a>     CurrentRating=<span class="source_int">0.550000</span>
<a name="115"></a>     Description=<span class="source_string">"The GES BioRifle continues to be one of the most controversial weapons in the Tournament. Loved by some, loathed by others, the BioRifle has long been the subject of debate over its usefulness.||Some Tournament purists argue that it is the equivalent of a cowardly minefield. Others argue that it enhances the tactical capabilities of defensive combatants.|Despite the debate, the weapon provides rapid-fire wide-area coverage in primary firing mode, and a single-fire variable payload secondary firing mode. In layman's terms, this equates to being able to pepper an area with small globs of Biosludge, or launch one large glob at the target."</span>
<a name="116"></a>     EffectOffset=(<span class="source_type">X</span>=<span class="source_int">100.000000</span>,<span class="source_type">Y</span>=<span class="source_int">32.000000</span>,<span class="source_type">Z</span>=-<span class="source_int">20.000000</span>)
<a name="117"></a>     DisplayFOV=<span class="source_int">60.000000</span>
<a name="118"></a>     Priority=<span class="source_int">4</span>
<a name="119"></a>     HudColor=(<span class="source_type">B</span>=<span class="source_int">255</span>,G=<span class="source_int">0</span>,<span class="source_type">R</span>=<span class="source_int">0</span>)
<a name="120"></a>     SmallViewOffset=(<span class="source_type">X</span>=<span class="source_int">19.000000</span>,<span class="source_type">Y</span>=<span class="source_int">9.000000</span>,<span class="source_type">Z</span>=-<span class="source_int">6.000000</span>)
<a name="121"></a>     CenteredOffsetY=-<span class="source_int">8.000000</span>
<a name="122"></a>     CustomCrosshair=<span class="source_int">7</span>
<a name="123"></a>     CustomCrossHairColor=(G=<span class="source_int">0</span>,<span class="source_type">R</span>=<span class="source_int">0</span>)
<a name="124"></a>     CustomCrossHairScale=<span class="source_int">1.333000</span>
<a name="125"></a>     CustomCrossHairTextureName=<span class="source_string">"Crosshairs.Hud.Crosshair_Triad1"</span>
<a name="126"></a>     InventoryGroup=<span class="source_int">3</span>
<a name="127"></a>     PickupClass=<span class="source_keyword">Class</span><span class="source_name">'XWeapons.BioRiflePickup'</span>
<a name="128"></a>     PlayerViewOffset=(<span class="source_type">X</span>=<span class="source_int">7.000000</span>,<span class="source_type">Y</span>=<span class="source_int">3.000000</span>)
<a name="129"></a>     BobDamping=<span class="source_int">2.200000</span>
<a name="130"></a>     AttachmentClass=<span class="source_keyword">Class</span><span class="source_name">'XWeapons.BioAttachment'</span>
<a name="131"></a>     IconMaterial=<span class="source_type"><a href="../engine/texture.html" class="source">Texture</a></span><span class="source_name">'HUDContent.Generic.HUD'</span>
<a name="132"></a>     IconCoords=(X1=<span class="source_int">179</span>,Y1=<span class="source_int">127</span>,X2=<span class="source_int">241</span>,<span class="source_type">Y2</span>=<span class="source_int">175</span>)
<a name="133"></a>     ItemName=<span class="source_string">"Bio-Rifle"</span>
<a name="134"></a>     <span class="source_type">Mesh</span>=SkeletalMesh<span class="source_name">'Weapons.BioRifle_1st'</span>
<a name="135"></a>}
<a name="136"></a></pre></td></tr></table></div>
<hr />
<table class="header">
<tr class="header">
	<td class="header"><a href="../overview.html">Overview</a></td>
	<td class="header"><a href="../xweapons/xweapons-overview.html">Package</a></td>
	<td class="header"><a href="../xweapons/biorifle.html">Class</a></td>
	<td class="header_hilight">Source</td>
	<td class="header"><a class="header" href="../classtree.html#BioRifle">Class tree</a></td>
	<td class="header"><a class="header" href="../glossary_A.html">Glossary</a></td>
	<td class="logo" rowspan="2">UnrealScript<br />Documentation</td>
</tr>
<tr>
	<td class="subheader" colspan="3"><a href="../Source_xweapons/bioglob.html">previous class</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="../Source_xweapons/bioriflepickup.html">next class</a></td>
	<td class="subheader" colspan="2"><a href="../index.html" target="_top">frames</a> &nbsp;&nbsp;&nbsp;&nbsp; <a href="" target="_top">no frames</a></td>
</tr>
</table>

<div class="stats">Class file time: Sun 31/3/2019 17:32:40.000 - Creation time: Mon 15/4/2019 10:25:09.567 - Created with <a href="http://wiki.beyondunreal.com/wiki/UnCodeX" target="_blank">UnCodeX</a></div>

</body>
</html>